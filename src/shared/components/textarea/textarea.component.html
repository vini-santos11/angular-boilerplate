<div class="flex flex-col gap-1">
  <label
    *ngIf="label"
    class="text-sm font-bold"
    [ngClass]="{
      'text-[var(--border)]': disabled,
      'text-[var(--text)]': !disabled,
      'cursor-not-allowed': disabled
    }"
  >
    {{ label }} <span *ngIf="required" class="text-[var(--error)]">*</span>
  </label>

  <div
    class="flex items-center border border-[var(--border)] rounded-lg p-2 shadow-sm focus-within:border-[var(--primary)] focus-within:ring-1 focus-within:ring-[var(--primary)]"
    [ngClass]="{
      'bg-[var(--surface)]': !disabled,
      'bg-[var(--border)]': disabled,
      'cursor-not-allowed': disabled
    }"
  >
    <textarea
      class="flex-1 focus:outline-none text-sm text-[var(--text)] placeholder-gray-400 resize-y min-h-[50px] max-h-[200px] overflow-y-auto"
      [ngClass]="{
        'bg-transparent': !disabled,
        'bg-[var(--border)]': disabled,
        'cursor-not-allowed': disabled
      }"
      [attr.placeholder]="placeholder"
      [disabled]="disabled"
      [value]="value"
      (blur)="onBlur()"
      (input)="onInput($event)"
    ></textarea>
  </div>
  <span
    *ngIf="control?.invalid && (control?.touched || control?.dirty)"
    class="text-sm text-[var(--error)]"
  >
    {{ getErrorMessage() }}
  </span>
</div>
